<div class="row">
  <div class="col-2"></div>
  <div class="col-8">
    <div class="text-center h5 p-2 bg-light text-monospace font-weight-light border border-info border-top-0">Angular
      Firebase</div>
  </div>
  <div class="col"></div>
</div>
<div class="row">
  <div class="col">
    <app-add-data></app-add-data>
  </div>
</div>


<div class="row">
  <div class="col-10"></div>
  <div class="col">
    <div class="btn-group float-right">
      <input class="form-control" type="text" name="search" [(ngModel)]="searchText" placeholder="search" autocomplete="off">
    </div>
  </div>
</div>

<div class="row">
  <div class="col">
    <div *ngIf="success" role="alert" aria-live="assertive" aria-atomic="true" class="toast">
      <div class="toast-header">
        <strong class="mr-auto">Message</strong>
        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="toast-body">
        Your Data Updated Successfully
      </div>
    </div>
    <div class="container-fluid" *ngIf="data?.length>0; else noData" style="height:18em; overflow-x: auto;">
      <div class="row text-center text-monospace text-white font-weight-bold bg-info">
        <div class="col">Task Title</div>
        <div class="col">Description</div>
        <div class="col">Status</div>
        <div class="col">Assign To</div>
        <div class="col">Action</div>
        
      </div>
      <div class="row section-bg text-dark p-2 border-bottom" *ngFor="let d of data | filter:searchText" id="{{d.id}}">
        <div class="col border-right">
          <div class="animated pulse">{{d.title}}</div>
        </div>
        <div class="col border-right">{{d.description}}</div>
        <div class="col border-right">{{d.status}}</div>
        <div class="col border-right">{{d.assignTo}}</div>
        <div class="col text-center">
          <button (click)="editData($event,d);" mat-raised-button type="button">Edit</button>
          <button (click)="deleteData($event,d);" mat-raised-button  color="warn" type="button">Delete</button>
        </div>
        <div class="col-12 mt-2 animated bounce edit-panel" *ngIf="editState && dtoEdit.id == d.id"> 
          <i (click)="close()" class="fa fa-window-close close" aria-hidden="true"></i>
          <div class="card p-2">
            <form [formGroup]="editForm" (ngSubmit)="updateData(d)">
              <div class="row">
                <div class="col">
                  <div class="form-group">
                    <label for="title">Task Title</label>
                    <input id="update-title" formControlName="title" [(ngModel)]="d.title" class="form-control"
                      type="text" name="update-title">
                  </div>
                </div>
                <div class="col">
                  <div class="form-group">
                    <label for="description">Description</label>
                    <input id="update-description" formControlName="description" [(ngModel)]="d.description"
                      class="form-control" type="text" name="update-description">
                  </div>
                </div>
                <div class="col">
                  <div class="form-group">
                      <label for="editStatus">Status</label>
                    <select class="custom-select mr-sm-2" id="editStatus" name="status" formControlName="editStatus"
                      [(ngModel)]="d.status">
                      <option value="" disabled>Chose status</option>
                      <option *ngFor="let stats of status" [ngValue]="stats">{{stats}}</option>
                    </select>

                    <!-- <label for="status">Description</label>
                        <input id="update-description"  formControlName="description"  [(ngModel)]="d.description" class="form-control" type="text"
                          name="update-description"> -->
                  </div>
                </div>
                <div class="col">
                  <div class="form-group">
                      <label for="editAssignTo">Assign To</label>
                    <select class="custom-select mr-sm-2" id="editAssignTo" name="editAssignTo" formControlName="assignTo"
                      [(ngModel)]="d.assignTo">
                      <option value="" disabled>Chose Opton</option>
                      <option *ngFor="let assign of assignList" [ngValue]="assign">{{assign}}</option>
                    </select>

                    <!-- <label for="status">Description</label>
                        <input id="update-description"  formControlName="description"  [(ngModel)]="d.description" class="form-control" type="text"
                          name="update-description"> -->
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <input class="btn btn-dark" type="submit" value="update">
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <ng-template #noData>
      <div class="alert alert-info" role="alert">
        There is no data in the list
      </div>
    </ng-template>
  </div>
</div>